<html>
<head>
<meta http-equiv="refresh" content="300" >
<title>
</title>


<style>
body{
margin:0px;
padding:0px;
color:#FFF;
background-color:#555;
}
</style>

</head>
<body style="font-family:sans-serif; text-shadow: 3px 3px 0px #000000; font-stretch: semi-condensed; background-repeat:no-repeat;">


<script>
// Ajax function, gets the content of an xml file and stores it in XML DOM
function getXML_file(xml_file) {
  var xhttp = (window.XMLHttpRequest) ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');  // XMLHttpRequest object

  // sets and sends the request for calling "xml_file"
  xhttp.open("GET", xml_file ,false);
  xhttp.send(null);

  // sets and returns the content as XML DOM
  xmlDoc = xhttp.responseXML;
  return xmlDoc;
}

// XML file address
var file_xml ='https://api.openweathermap.org/data/2.5/weather?q=Barranqueras,CH,AR,ES&limit=1&appid=9c176cf4bd204957319a1fb2df24ea6b&units=metric&lang=es&mode=xml';

// calls the "getXML_file()" function "file_xml"
var xml_dom = getXML_file(file_xml);
//var ar_city = xml_dom.getElementsByTagName("city"); //gets an Array with all "city" tags


var url_string = window.location;
var url = new URL(url_string);
var theme = url.searchParams.get("t");
var icon = xml_dom.getElementsByTagName("weather")[0].getAttribute("icon")
document.body.style.backgroundImage = "url('theme/"+ theme + "/" + icon + ".png')";
  
</script>

</body>
</html>
